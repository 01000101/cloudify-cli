cosmo-cli
=========

Command line interface for cloudify




Deploying your first application - Walkthrough
==============================================
1) CLI and Provider Installation:
  - Install Cloudify CLI (temporary url, will be on PyPI soon):
  `pip install https://github.com/CloudifySource/cosmo-cli/archive/develop.zip`

  - Install a Cloudify provider (Openstack is used in this example):
  `pip install https://github.com/CloudifySource/cloudify-openstack/archive/develop.zip`

<br>
2) Initialization:
  - Cd into your favorite working directory and initialize Cloudify for some provider:
  `cfy init openstack`

  - Edit the autogenerated provider-specific config file "cloudify-config.yaml" - update its mandatory settings as needed.<br>
    You may also modify the more advanced default settings in "cloudify-config.defaults.yaml", or simply override them by assigning to them different values in "cloudify-config.yaml".
    (For more information about the configuration files parameters used in this example, view the [Cloudify-Openstack readme](https://github.com/CloudifySource/cloudify-openstack/blob/develop/README.md))

  - Bootstrap cloudify on Openstack:
  `cfy bootstrap`
  
  This could take a bit of time to finish... Looking for something to do in the meanwhile? http://dynamic.xkcd.com/random/comic/

<br>
3) Deploying your application:
  - Upload your blueprint:
  `cfy blueprints upload my-app/blueprint.yaml -a my-blueprint`

  - Create a deployment of the blueprint:
  `cfy deployments create my-blueprint -a my-deployment`

  - Execute an install operation on the deployment:
  `cfy deployments execute install my-deployment`

This will install your deployment - all you have left to do is sit back and watch the events flow by until the deployment is complete.



Providers
=========
A provider is any platform which allows for the creation and bootstrapping of a management server (e.g. Openstack). The CLI can work with any provider by running provider-specific commands through  .

Note that the CLI can be used even without the installation of any providers - if you already possess a bootstrapped management server, you may simply direct the CLI to work with that server (`cfy use <management-ip> -a my-server`), and you can then issue any of the CLI commands to that server (with the exception of the "cfy teardown" command)


Creating a New Provider:
------------------------
Providers are simply Python modules which adhere to certain conventions and implement a certain interface.
By convention, the module name is called "cloudify_<provider-name>.py"
Provider's 



Working Directory Settings (general context?)
=======
aliases are saved locally
recommend adding '.cloudify' to git ignore
where do i say that defaults config file override config file stuff? vice versa.



Commands Docs
=============

**Command:** status

**Description:** queries the status of the management server

**Usage:** `cfy status [-t, --management-ip <ip>]`

**Parameters**:

- management-ip: the management-server to use (Optional)

**Example:**
  `cfy status`

------
  
**Command:** use

**Description:** defines a default management server to work with

**Usage:** `cfy use <management_ip> [-a, --alias <alias>] [-f, --force]`

**Parameters**:

- management_ip: the management-server to define as the default management server
- alias: an alias for the given management server address (Optional)
- force: a flag indicating authorization to overwrite the alias provided if it's already in use (Optional)

**Example:**
  `cfy use 10.0.0.1 -a my-mgmt-server`
  
------
  
**Command:** init

**Description:** initializes a cloudify working directory for a given provider

**Usage:** `cfy init <provider> [-t, --target-dir <dir>]`

**Parameters**:

- provider: the cloudify provider to use for initialization
- target-dir: the directory that will be used as the cloudify working directory (Optional)

**Example:**
  `cfy init openstack`
  
------
  
**Command:** bootstrap

**Description:** bootstraps cloudify on the current provider

**Usage:** `cfy bootstrap [-c, --config-file <file>] [-d, --defaults-config-file <file>]`

**Parameters**:

- config-file: path to the config file (Optional)
- defaults-config-file: path to the defaults config file (Optional)

**Example:**
  `cfy bootstrap`
  
------
  
**Command:** teardown

**Description:** tears down the management-server, as well as any aliases under its context

**Usage:** `cfy teardown [-f, --force] [-t, --management-ip <ip>]`

**Parameters**:

- force: a flag indicating confirmation for this irreversable action (Optional)
- management-ip: the management-server to use (Optional)

**Example:**
  `cfy teardown -f`
  
------
  
**Command:** upload

**Description:** uploads a blueprint to the management server
  
**Usage:** `cfy blueprints upload <blueprint_path> [-a, --alias <alias>] [-t, --management-ip <ip>]`

**Parameters**:

- blueprint_path: path to the blueprint (yaml file) to upload
- alias: an alias for the blueprint id that will be created for the uploaded blueprint (Optional)
- management-ip: the management-server to use (Optional)

**Example:**
  `cfy blueprints upload blueprint.yaml -a my-blueprint`
  
------
  
**Command:** list

**Description:** lists the blueprint on the management server, as well as the blueprints aliases
  
**Usage:** `cfy blueprints list [-t, --management-ip <ip>]`

**Parameters**:

- management-ip: the management-server to use (Optional)

**Example:**
  `cfy blueprints list`
  
------
  
**Command:** delete

**Description:** deletes the blueprint from the management server
  
**Usage:** `cfy blueprints delete <blueprint_id> [-t, --management-ip <ip>]`

**Parameters**:

- blueprint_id: the id or alias of the blueprint to delete
- management-ip: the management-server to use (Optional)

**Example:**
  `cfy blueprints delete my-blueprint`
  
------
  
**Command:** alias

**Description:** creates an alias for a blueprint id
  
**Usage:** `cfy blueprints alias <alias> <blueprint_id> [-f, --force] [-t, --management-ip <ip>]`

**Parameters**:

- alias: the alias for the blueprint id
- blueprint_id: the id of the blueprint
- force: a flag indicating authorization to overwrite the alias provided if it's already in use (Optional)
- management-ip: the management-server to use (Optional)

**Example:**
  `cfy blueprints alias my-blueprint 38f8520f-809f-4162-ae96-75555d906fkk`

------
  
**Command:** create

**Description:** creates a deployment of a blueprint
  
**Usage:** `cfy deployments create <blueprint_id> [-a, --alias <alias>] [-t, --management-ip <ip>]`

**Parameters**:

- blueprint_id: the id or alias of the blueprint to deploy
- alias: an alias for the deployment id that will be created for the new deployment (Optional)
- management-ip: the management-server to use (Optional)

**Example:**
  `cfy deployments create my-blueprint -a my-deployment`  

------
  
**Command:** execute

**Description:** executes an operation on a deployment
  
**Usage:** `cfy deployments execute <operation> <deployment_id> [-t, --management-ip <ip>]`

**Parameters**:

- operation: the name of the operation to execute
- deployment_id: the deployment id or alias on which the operation should be executed
- management-ip: the management-server to use (Optional)

**Example:**
  `cfy deployments execute install my-deployment`
  
------
  
**Command:** alias

**Description:** creates an alias for a deployment id
  
**Usage:** `cfy deployments alias <alias> <deployment_id> [-f, --force] [-t, --management-ip <ip>]`

**Parameters**:

- alias: the alias for the deployment id
- deployment_id: the id of the deployment
- force: a flag indicating authorization to overwrite the alias provided if it's already in use (Optional)
- management-ip: the management-server to use (Optional)

**Example:**
  `cfy deployments alias my-deployment 38f8520f-809f-4162-ae96-75555d906fkk`  
